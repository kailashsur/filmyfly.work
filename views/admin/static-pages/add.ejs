<%- include('../../partials/admin_header', { title: title }) %>

<div class="container">
    <div class="admin-form-page">
        <div class="page-header">
            <h1>Add Static Page</h1>
            <div class="header-actions">
                <a href="/admin" class="btn btn-secondary">Go to Dashboard</a>
                <a href="/admin/static-pages" class="btn btn-secondary">Back to List</a>
            </div>
        </div>

        <% if (error) { %>
            <div class="alert alert-error">
                <%= error %>
            </div>
        <% } %>

        <form method="POST" action="/admin/static-pages/add" class="movie-form">
            <div class="form-group">
                <label for="title">Title *</label>
                <input type="text" id="title" name="title" value="<%= page?.title || '' %>" required>
                <small>The title of the page</small>
            </div>

            <div class="form-group">
                <label for="slug">Slug *</label>
                <input type="text" id="slug" name="slug" value="<%= page?.slug || '' %>" required>
                <small>URL-friendly identifier (e.g., privacy-policy, contact-us). The page will be accessible at /site-[slug]</small>
            </div>

            <div class="form-group">
                <label for="content">Content *</label>
                <textarea id="content" name="content" rows="15" required><%= page?.content || '' %></textarea>
                <small>HTML content is supported</small>
            </div>

            <div class="form-group">
                <label for="metaTitle">Meta Title</label>
                <input type="text" id="metaTitle" name="metaTitle" value="<%= page?.metaTitle || '' %>">
                <small>SEO meta title (optional)</small>
            </div>

            <div class="form-group">
                <label for="metaDescription">Meta Description</label>
                <textarea id="metaDescription" name="metaDescription" rows="3"><%= page?.metaDescription || '' %></textarea>
                <small>SEO meta description (optional)</small>
            </div>

            <div class="form-group">
                <label for="metaKeywords">Meta Keywords</label>
                <input type="text" id="metaKeywords" name="metaKeywords" value="<%= page?.metaKeywords || '' %>">
                <small>Comma-separated keywords (optional)</small>
            </div>

            <div class="form-group">
                <label>
                    <input type="checkbox" name="isPublished" <%= page?.isPublished ? 'checked' : '' %>>
                    Publish this page
                </label>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Create Page</button>
                <a href="/admin/static-pages" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>

<script>
    // Auto-generate slug from title
    document.getElementById('title')?.addEventListener('input', function(e) {
        const slugInput = document.getElementById('slug');
        if (slugInput && !slugInput.value) {
            const slug = e.target.value
                .toLowerCase()
                .trim()
                .replace(/[^\w\s-]/g, '')
                .replace(/\s+/g, '-')
                .replace(/-+/g, '-');
            slugInput.value = slug;
        }
    });
</script>

<%- include('../../partials/admin_footer') %>

